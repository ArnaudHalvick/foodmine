<div class="signup-container">
  <h2>Sign Up</h2>

  <form #signupForm="ngForm" (ngSubmit)="signup()">
    <div class="form-group">
      <label for="name">Name:</label>
      <input
        type="text"
        id="name"
        name="name"
        [(ngModel)]="user.name"
        required
        #name="ngModel"
      />
      @if (name.invalid && (name.dirty || name.touched)) { @if
      (name.errors?.['required']) {
      <div class="error">Name is required.</div>
      } }
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="user.email"
        required
        email
        #email="ngModel"
      />
      @if (email.invalid && (email.dirty || email.touched)) { @if
      (email.errors?.['required']) {
      <div class="error">Email is required.</div>
      } @if (email.errors?.['email']) {
      <div class="error">Invalid email format.</div>
      } }
    </div>

    <div class="form-group">
      <label for="username">Username:</label>
      <input
        type="text"
        id="username"
        name="username"
        [(ngModel)]="user.username"
        required
        #username="ngModel"
      />
      @if (username.invalid && (username.dirty || username.touched)) { @if
      (username.errors?.['required']) {
      <div class="error">Username is required.</div>
      } }
    </div>

    <div class="form-group">
      <label for="password">Password:</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="user.password"
        required
        #password="ngModel"
      />
      @if (password.invalid && (password.dirty || password.touched)) { @if
      (password.errors?.['required']) {
      <div class="error">Password is required.</div>
      } }

      <div class="password-requirements">
        <h3>Password Requirements:</h3>
        <ul>
          @for (req of passwordRequirements; track req.label) {
          <li
            class="{{
              user.password && req.check(user.password) ? 'met' : 'unmet'
            }}"
          >
            {{ req.label }}
          </li>
          }
        </ul>

        @if (passwordValidationErrors.length > 0) {
        <div class="error">
          Please meet the following password requirements:
          <ul>
            @for (error of passwordValidationErrors; track error) {
            <li>{{ error }}</li>
            }
          </ul>
        </div>
        }
      </div>
    </div>

    @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
    }

    <button type="submit" [disabled]="signupForm.invalid">Sign Up</button>
  </form>
</div>
